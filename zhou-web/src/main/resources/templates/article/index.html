<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="/common/common :: commonHead(~{::link},~{})">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/loading.default.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/widget/refresh/refresh.default.css}">
</head>

<body>

<div class="header header2" th:include="/common/header :: commonHeader"></div>
<div class="headerTel" th:include="/common/header :: commonHeaderTel"></div>
<div class="navLayer" th:include="/common/nav :: commonNavLayer"></div>


<!--导航菜单触发结束-->
<div class="pageBanner">
    <div class="imgDiv">
        <img th:src="@{/static/images/backg.jpg}" style="height: 580px;" alt="">
    </div>
</div>
<!---->
<div class="pageBannerTel">
    <div class="imgDiv">
        <img th:src="@{/static/images/backg.jpg}" style="height: 250px;" alt="">
    </div>
</div>
<!---->
<!--<div class="pageTitleTel">
    <div class="sideTitleTel">
        <div class="con"><a href="javascript:;" class="tan">集团资讯</a></div>
        <div class="sideTitleNav">
            <div class="box">
                <ul>
                    <li><a href="news.html">集团资讯</a></li>
                    <li><a href="news1.html">行业动态</a></li>
                    <li><a href="news2.html">最新项目</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>-->
<!---->
<div class="pageBox3">
    <div class="wal">
        <div class="pageTitle" style="text-align: center">
            <div class="txt1">News information</div>
            <div class="txt2">新闻资讯</div>
        </div>
        <div class="news">
            <div class="list">
                <section id="body">
                    <div class="ui-refresh" id="divrefresh">
                        <ul class="data-list">
                            <li th:each="article:${page.records}">
                                <div class="box">
                                    <div class="imgDiv">
                                        <a href="javascript:void(0)"><img th:if="${article.picture!=null && article.picture!=''}"  th:src="${article.picture}" alt="">
                                        <img th:if="${article.picture ==null || article.picture==''}"  th:src="@{/static/images/case02.jpg}"  alt="">
                                        </a>
                                        <div class="hideBox">
                                            <div class="more"><a th:href="@{/article/detail_}+${article.id}+'.html'">更多</a></div>
                                        </div>
                                    </div>
                                    <div class="name"><a th:href="@{/article/detail_}+${article.id}+'.html'"  th:text="${article.title}"></a></div>
                                    <div class="content" th:text="${article.description}"> </div>
                                    <div class="botDiv">
                                        <div class="time" th:text="${#temporals.format(article.publishDate, 'yyyy-MM-dd HH:mm')}"></div>
                                        <a th:href="@{/article/detail_}+${article.id}+'.html'" class="add">
                                            <img th:src="@{/static/images/nimg11_1.png}"  alt=""></a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <div class="clear_f"></div>
                        <div class="pageMore"><a class="ui-refresh-down" th:href="@{/article}">加载更多</a></div>
                    </div>
                </section>
            </div>
        </div>
        <div class="pageNum">
            <span th:each="pageNo : ${#numbers.sequence(1, page.pages)}">
                <a  th:if="${page.current eq pageNo}" href="javascript:void(0)" class="aNow"  th:text="${pageNo}"></a>
                <a  th:if="${not (page.current eq pageNo)}" th:href="@{/case/list_}+${pageNo}+'.html'" th:text="${pageNo}"> </a>
            </span>
        </div>
    </div>
</div>
<div class="footDiv" th:include="/common/footer :: commonFooter"></div>

<script  th:src="@{/static/js/zepto.min.js}"></script>
<script  th:src="@{/static/js/zepto.extend.js}"></script>
<script  th:src="@{/static/js/zepto.ui.js}"></script>
<script  th:src="@{/static/js/widget/refresh.js}"></script>
<script  th:src="@{/static/js/widget/refresh.lite.js}"></script>

<script type="text/javascript">
    //加载更多
    var page = 1;
    var hasMore = "true";
    (function () {
        /*组件初始化js begin*/
        $('.ui-refresh').refresh({
            ready: function (dir, type) {
                var me = this;
                page++;
                if (hasMore == "true") {
                    $.getJSON('/ajax/news.aspx?page=' + page + '&m=120001', function (data) {
                        var list = $('.data-list'),
                            html = (function (data) {      //数据渲染
                                var liArr = [];
                                $.each(data, function () {
                                    liArr.push(this.html);

                                    hasMore = this.hasMore;

                                });
                                return liArr.join('');
                            })(data);

                        list[dir == 'up' ? 'prepend' : 'append'](html);
                        me.afterDataLoading();
                        if (hasMore == "false") {
                            $(".ui-refresh-down").hide();
                            $(".diva1").hide();
                        }
                    });
                }
            }
        });
        /*组件初始化js end*/
    })();
</script>
</body>
</html>
